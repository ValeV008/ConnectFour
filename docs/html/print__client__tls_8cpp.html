<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Connect Four Game: websocketpp/examples/print_client_tls/print_client_tls.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Connect Four Game
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('print__client__tls_8cpp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">print_client_tls.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;websocketpp/config/asio_client.hpp&gt;</code><br />
<code>#include &lt;websocketpp/client.hpp&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae33ce09d0b746c16fce0a47d92c1d8e9" id="r_ae33ce09d0b746c16fce0a47d92c1d8e9"><td class="memItemLeft" align="right" valign="top">typedef websocketpp::client&lt; websocketpp::config::asio_tls_client &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae33ce09d0b746c16fce0a47d92c1d8e9">client</a></td></tr>
<tr class="separator:ae33ce09d0b746c16fce0a47d92c1d8e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92fc5d22ec3d288e0ac56deb6c827d6f" id="r_a92fc5d22ec3d288e0ac56deb6c827d6f"><td class="memItemLeft" align="right" valign="top">typedef websocketpp::lib::shared_ptr&lt; websocketpp::lib::asio::ssl::context &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a92fc5d22ec3d288e0ac56deb6c827d6f">context_ptr</a></td></tr>
<tr class="separator:a92fc5d22ec3d288e0ac56deb6c827d6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a96281a4ea814ff8158f35904748f0062" id="r_a96281a4ea814ff8158f35904748f0062"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96281a4ea814ff8158f35904748f0062">on_message</a> (websocketpp::connection_hdl, <a class="el" href="debug__client_8cpp.html#ab550be4ec014c796fca6629c5c89fd7a">client::message_ptr</a> msg)</td></tr>
<tr class="separator:a96281a4ea814ff8158f35904748f0062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5d30eeecae5b132b0765ab29c19c700" id="r_ae5d30eeecae5b132b0765ab29c19c700"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae5d30eeecae5b132b0765ab29c19c700">verify_subject_alternative_name</a> (const char *hostname, X509 *cert)</td></tr>
<tr class="memdesc:ae5d30eeecae5b132b0765ab29c19c700"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify that one of the subject alternative names matches the given hostname.  <br /></td></tr>
<tr class="separator:ae5d30eeecae5b132b0765ab29c19c700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68642bb71b0aa86025db7509f7e26985" id="r_a68642bb71b0aa86025db7509f7e26985"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a68642bb71b0aa86025db7509f7e26985">verify_common_name</a> (char const *hostname, X509 *cert)</td></tr>
<tr class="memdesc:a68642bb71b0aa86025db7509f7e26985"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify that the certificate common name matches the given hostname.  <br /></td></tr>
<tr class="separator:a68642bb71b0aa86025db7509f7e26985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8572a2edbd726b23240b58c56a773d1e" id="r_a8572a2edbd726b23240b58c56a773d1e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8572a2edbd726b23240b58c56a773d1e">verify_certificate</a> (const char *hostname, bool preverified, boost::asio::ssl::verify_context &amp;ctx)</td></tr>
<tr class="separator:a8572a2edbd726b23240b58c56a773d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27a88c560475c8a17add7f6f058c7d47" id="r_a27a88c560475c8a17add7f6f058c7d47"><td class="memItemLeft" align="right" valign="top"><a class="el" href="debug__client_8cpp.html#ab68ea3df896e32c1d2fb314a96c46a8f">context_ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a27a88c560475c8a17add7f6f058c7d47">on_tls_init</a> (const char *hostname, websocketpp::connection_hdl)</td></tr>
<tr class="memdesc:a27a88c560475c8a17add7f6f058c7d47"><td class="mdescLeft">&#160;</td><td class="mdescRight">TLS Initialization handler.  <br /></td></tr>
<tr class="separator:a27a88c560475c8a17add7f6f058c7d47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97" id="r_a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ae33ce09d0b746c16fce0a47d92c1d8e9" name="ae33ce09d0b746c16fce0a47d92c1d8e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae33ce09d0b746c16fce0a47d92c1d8e9">&#9670;&#160;</a></span>client</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef websocketpp::client&lt;websocketpp::config::asio_tls_client&gt; <a class="el" href="bot_8h.html#aff8c62b83a9c8aefc476f96166656b76">client</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a92fc5d22ec3d288e0ac56deb6c827d6f" name="a92fc5d22ec3d288e0ac56deb6c827d6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92fc5d22ec3d288e0ac56deb6c827d6f">&#9670;&#160;</a></span>context_ptr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef websocketpp::lib::shared_ptr&lt;websocketpp::lib::asio::ssl::context&gt; <a class="el" href="debug__client_8cpp.html#ab68ea3df896e32c1d2fb314a96c46a8f">context_ptr</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a0ddf1224851353fc92bfbff6f499fa97" name="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>argc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>argv</em></span>[]&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a96281a4ea814ff8158f35904748f0062" name="a96281a4ea814ff8158f35904748f0062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96281a4ea814ff8158f35904748f0062">&#9670;&#160;</a></span>on_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void on_message </td>
          <td>(</td>
          <td class="paramtype">websocketpp::connection_hdl</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="debug__client_8cpp.html#ab550be4ec014c796fca6629c5c89fd7a">client::message_ptr</a></td>          <td class="paramname"><span class="paramname"><em>msg</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a27a88c560475c8a17add7f6f058c7d47" name="a27a88c560475c8a17add7f6f058c7d47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27a88c560475c8a17add7f6f058c7d47">&#9670;&#160;</a></span>on_tls_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="debug__client_8cpp.html#ab68ea3df896e32c1d2fb314a96c46a8f">context_ptr</a> on_tls_init </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>hostname</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">websocketpp::connection_hdl</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>TLS Initialization handler. </p>
<p>WebSocket++ core and the Asio Transport do not handle TLS context creation and setup. This callback is provided so that the end user can set up their TLS context using whatever settings make sense for their application.</p>
<p>As Asio and OpenSSL do not provide great documentation for the very common case of connect and actually perform basic verification of server certs this example includes a basic implementation (using Asio and OpenSSL) of the following reasonable default settings and verification steps:</p>
<ul>
<li>Disable SSLv2 and SSLv3</li>
<li>Load trusted CA certificates and verify the server cert is trusted.</li>
<li>Verify that the hostname matches either the common name or one of the subject alternative names on the certificate.</li>
</ul>
<p>This is not meant to be an exhaustive reference implimentation of a perfect TLS client, but rather a reasonable starting point for building a secure TLS encrypted WebSocket client.</p>
<p>If any TLS, Asio, or OpenSSL experts feel that these settings are poor defaults or there are critically missing steps please open a GitHub issue or drop a line on the project mailing list.</p>
<p>Note the bundled CA cert ca-chain.cert.pem is the CA cert that signed the cert bundled with echo_server_tls. You can use print_client_tls with this CA cert to connect to echo_server_tls as long as you use /etc/hosts or something equivilent to spoof one of the names on that cert (websocketpp.org, for example). </p>

</div>
</div>
<a id="a8572a2edbd726b23240b58c56a773d1e" name="a8572a2edbd726b23240b58c56a773d1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8572a2edbd726b23240b58c56a773d1e">&#9670;&#160;</a></span>verify_certificate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool verify_certificate </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>hostname</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>preverified</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boost::asio::ssl::verify_context &amp;</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This code is derived from examples and documentation found ato00po <a href="http://www.boost.org/doc/libs/1_61_0/doc/html/boost_asio/example/cpp03/ssl/client.cpp">http://www.boost.org/doc/libs/1_61_0/doc/html/boost_asio/example/cpp03/ssl/client.cpp</a> and <a href="https://github.com/iSECPartners/ssl-conservatory">https://github.com/iSECPartners/ssl-conservatory</a> </p>

</div>
</div>
<a id="a68642bb71b0aa86025db7509f7e26985" name="a68642bb71b0aa86025db7509f7e26985"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68642bb71b0aa86025db7509f7e26985">&#9670;&#160;</a></span>verify_common_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool verify_common_name </td>
          <td>(</td>
          <td class="paramtype">char const *</td>          <td class="paramname"><span class="paramname"><em>hostname</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">X509 *</td>          <td class="paramname"><span class="paramname"><em>cert</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verify that the certificate common name matches the given hostname. </p>

</div>
</div>
<a id="ae5d30eeecae5b132b0765ab29c19c700" name="ae5d30eeecae5b132b0765ab29c19c700"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5d30eeecae5b132b0765ab29c19c700">&#9670;&#160;</a></span>verify_subject_alternative_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool verify_subject_alternative_name </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>hostname</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">X509 *</td>          <td class="paramname"><span class="paramname"><em>cert</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verify that one of the subject alternative names matches the given hostname. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_562379e39fbb227ee9ca06d3af41a8df.html">websocketpp</a></li><li class="navelem"><a class="el" href="dir_e60c9f8d70f3d23f3c27a6ae906ec97b.html">examples</a></li><li class="navelem"><a class="el" href="dir_f0d7a7865462512e60a1f26bfe0d6400.html">print_client_tls</a></li><li class="navelem"><a class="el" href="print__client__tls_8cpp.html">print_client_tls.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
